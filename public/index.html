<!doctype html>
<html lang="de">
  <head>
    <title>Blubbsonntag</title>
    <link rel="icon" href="favicon.svg" type="image/svg+xml" sizes="any">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta property="og:title" content="Blubbsonntag">
    <meta property="og:description" content="Kennen Sie Blubbsonntag?">
    <meta property="og:image" content="https://blubbsonntag.de/og_image.jpg">
    <meta property="og:url" content="https://blubbsonntag.de/">

    <link href="output.css" rel="stylesheet">
  </head>

  <body class="flex flex-col mx-auto px-3">

    <!-- Header -->
    <section class="section my-5 ms-1">
      <h1 class="heading huge-heading z-10">Blubbsonntag</h1>
      <p class="opacity-75">Kennen Sie Blubbsonntag?<br>Denn er ist sehr gut...</p>
    </section>

    <section id="countdown-section" class="section">
      <div id="countdown" class="flex flex-row mb-5 justify-between text-center">
        <div class="card countdown-item">
          <h1 id="days" class="heading">0</h1>
          <h5 class="text-xs opacity-75">Tage</h5>
        </div>
        <img src="colon.svg" alt="Doppelpunkt" class="colon" />
        <div class="card countdown-item">
          <h1 id="hours" class="heading">0</h1>
          <h5 class="text-xs opacity-75">Stunden</h5>
        </div>
        <img src="colon.svg" alt="Doppelpunkt" class="colon" />
        <div class="card countdown-item">
          <h1 id="minutes" class="heading">0</h1>
          <h5 class="text-xs opacity-75">Minuten</h5>
        </div>
        <img src="colon.svg" alt="Doppelpunkt" class="colon" />
        <div class="card countdown-item">
          <h1 id="seconds" class="heading">0</h1>
          <h5 class="text-xs opacity-75">Sekunden</h5>
        </div>
      </div>
      <div class="flex ms-1 mb-5 opacity-75 items-center">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
          <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
        </svg>  
        <h5 class="ms-1">jeden Sonntag, 20 Uhr</h5>
      </div>

    </section>

    <!-- Calendar -->
    <section class="section">
      <div class="card">
        <h1 class="heading text-lg">Abonniere jetzt den offiziellen Blubbsonntag-Kalender!</h1>
        <h5 class="text-md mt-1 opacity-75">Nie wieder Blubbsonntag vergessen...</h5>
        <a class="cta-button mt-4" href="webcal://cloud.eosander12.de/remote.php/dav/public-calendars/gqzNCj6irtR3dr83?export">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6">
            <path d="M12 11.993a.75.75 0 0 0-.75.75v.006c0 .414.336.75.75.75h.006a.75.75 0 0 0 .75-.75v-.006a.75.75 0 0 0-.75-.75H12ZM12 16.494a.75.75 0 0 0-.75.75v.005c0 .414.335.75.75.75h.005a.75.75 0 0 0 .75-.75v-.005a.75.75 0 0 0-.75-.75H12ZM8.999 17.244a.75.75 0 0 1 .75-.75h.006a.75.75 0 0 1 .75.75v.006a.75.75 0 0 1-.75.75h-.006a.75.75 0 0 1-.75-.75v-.006ZM7.499 16.494a.75.75 0 0 0-.75.75v.005c0 .414.336.75.75.75h.005a.75.75 0 0 0 .75-.75v-.005a.75.75 0 0 0-.75-.75H7.5ZM13.499 14.997a.75.75 0 0 1 .75-.75h.006a.75.75 0 0 1 .75.75v.005a.75.75 0 0 1-.75.75h-.006a.75.75 0 0 1-.75-.75v-.005ZM14.25 16.494a.75.75 0 0 0-.75.75v.006c0 .414.335.75.75.75h.005a.75.75 0 0 0 .75-.75v-.006a.75.75 0 0 0-.75-.75h-.005ZM15.75 14.995a.75.75 0 0 1 .75-.75h.005a.75.75 0 0 1 .75.75v.006a.75.75 0 0 1-.75.75H16.5a.75.75 0 0 1-.75-.75v-.006ZM13.498 12.743a.75.75 0 0 1 .75-.75h2.25a.75.75 0 1 1 0 1.5h-2.25a.75.75 0 0 1-.75-.75ZM6.748 14.993a.75.75 0 0 1 .75-.75h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1-.75-.75Z" />
            <path fill-rule="evenodd" d="M18 2.993a.75.75 0 0 0-1.5 0v1.5h-9V2.994a.75.75 0 1 0-1.5 0v1.497h-.752a3 3 0 0 0-3 3v11.252a3 3 0 0 0 3 3h13.5a3 3 0 0 0 3-3V7.492a3 3 0 0 0-3-3H18V2.993ZM3.748 18.743v-7.5a1.5 1.5 0 0 1 1.5-1.5h13.5a1.5 1.5 0 0 1 1.5 1.5v7.5a1.5 1.5 0 0 1-1.5 1.5h-13.5a1.5 1.5 0 0 1-1.5-1.5Z" clip-rule="evenodd" />
          </svg>                             
          <p class="ms-1">Abonnieren</p>
        </a>
      </div>
    </section>

    <!-- Google Reviews -->
    <script src="https://static.elfsight.com/platform/platform.js" async></script>
    <div class="elfsight-app-22ad6f69-8de4-4dd8-8512-acc9fe6c7e2d mb-5" data-elfsight-app-lazy></div>
    <!-- Empty elements to trigger TW CSS class generation-->
    <div class="es-review-background-container es-review-container es-popup-content-container WidgetBackground__ContentContainer-sc" style="display: none;"></div>

    <script>
      if (
        localStorage.theme === 'dark' ||
        (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)
      ) {
        document.documentElement.classList.add('dark');
      } else {
        document.documentElement.classList.remove('dark');
      }

      function getNextSunday20(now) {
        // Sun is 0 in JavaScript Date
        const day = now.getDay();
        let daysUntil = (7 - day); // Days until next Sun
        if (day === 0 && now.getHours() < 20) {
          daysUntil = 0; // Now is Sun but before 20
        }
        if (day === 0 && now.getHours() >= 20) {
          daysUntil = 7; // After 20 on Sunday, next Sunday
        }
        const target = new Date(now);
        target.setDate(now.getDate() + daysUntil);
        target.setHours(20, 0, 0, 0); // Sun 20:00
        return target;
      }

      function updateCountdown() {
        const now = new Date();
        // const now = new Date(2025, 7, 17, 20, 0, 0, 0);

        // Check if is Sunday after 20:00
        if (now.getDay() === 0 && now.getHours() >= 20) {
          // Remove countdown, show banner
          document.getElementById("countdown").style.display = "none";
          let banner = document.getElementById("blubbsonntag-banner");
          if (!banner) {
            banner = document.createElement("div");
            banner.id = "blubbsonntag-banner";
            banner.className = "card p-5 text-center text-3xl font-bold";
            banner.innerHTML = "Jetzt ist Blubbsonntag ðŸŽ‰";
            /* append the banner to the first place in section */ 
            document.getElementById("countdown-section").prepend(banner);
          } else {
            banner.style.display = "";
          }
          return;
        }

        // Show countdown, remove banner
        document.getElementById("countdown-section").style.display = "";
        const banner = document.getElementById("blubbsonntag-banner");
        if (banner) banner.style.display = "none";

        // Target next Sun 20:00
        const target = getNextSunday20(now);
        let diff = (target - now) / 1000; // in seconds
        diff = Math.max(0, Math.floor(diff));

        const days = Math.floor(diff / (60 * 60 * 24));
        const hours = Math.floor((diff % (60 * 60 * 24)) / 3600);
        const minutes = Math.floor((diff % 3600) / 60);
        const seconds = diff % 60;

        document.getElementById("days").innerText = days;
        document.getElementById("hours").innerText = hours.toString().padStart(2, '0');
        document.getElementById("minutes").innerText = minutes.toString().padStart(2, '0');
        document.getElementById("seconds").innerText = seconds.toString().padStart(2, '0');
      }

      setInterval(updateCountdown, 1000);
      updateCountdown();

    </script>

    <script>
      let count = 0;

      const intervalId = setInterval(() => {
        count++;
        const anchors = document.querySelectorAll('a');
        anchors.forEach(anchor => {
          if (anchor.textContent.trim() === 'Free Google Reviews widget') {
            anchor.style.display = 'none';
          }
        });

        if (count >= 10) {
          clearInterval(intervalId);
        }
      }, 1000);
    </script>
  
      
  </body>
</html>